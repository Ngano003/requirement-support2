# ソフトウェア要件定義書: Requirements Review AI (v3.2)

## 1. はじめに
### 1.1 目的
要件定義書の「ヌケ・モレ・矛盾」を自動検出し、Webブラウザ上で対話的に確認・管理できるシステムを提供する。

## 2. システム構成
- **Frontend**: Streamlit (Python)
- **Backend/Deployment**: Docker Container (Single User Mode)
- **Storage**: ローカルファイルシステム (Project-based)

## 3. 機能要件

### 3.1 プロジェクト & 履歴管理
- **F-00.1 (プロジェクト)**: 任意のディレクトリをプロジェクトとして永続化する。
- **F-00.2 (解析履歴)**: 解析のたびに結果を履歴（Timestamp付きフォルダ等）として保存し、過去の結果を閲覧可能にする。
- **F-00.3 (設定管理)**: プロジェクトごとの設定（YAML）は、ファイル配置のみで管理する（GUI編集機能は持たない）。

### 3.2 入力 & 抽出 (Input)
- **F-01 (マルチフォーマット)**: Markdown, Word, Excel, PDF。
- **F-02.1 (分割 & オーバーラップ)**: 巨大ファイルは分割し、文脈維持のため前後の文章を重複（オーバーラップ）させて抽出する。
- **F-02.2 (抽出対象)**: テキストのみを対象とし、画像・図表は解析から除外する。
- **F-02.3 (処理判定)**: 複数ファイル解析時に1つでもエラーが発生した場合は、解析処理全体を「失敗」として扱う（All-or-Nothing）。

### 3.3 解析 & 検出 (Analysis)
- **F-03〜06**: グラフ構築、Dead End/Missing Else/Conflict検出。
- **F-11**: LLM切り替え（OpenAI互換ローカル / Google AI Studio）。

### 3.4 出力 & 可視化 (Visualization)
- **F-08.1 (インタラクティブグラフ)**: ズーム・パンに加え、ノード数が多い場合の「フィルタリング（重要度による表示制限）」機能を持つ。
- **F-08.2 (エビデンス表示)**: グラフのエッジ等をクリックした際、根拠となる元ドキュメントの記述（引用）を表示する。
- **F-12 (リアルタイムログ)**: 解析実行中、バックグラウンドで行われている処理（LLMプロンプト等）の詳細ログをブラウザ上でリアルタイムに確認できること。

## 4. 非機能要件
- **将来性**: 差分比較機能（Diff）の追加を見据えたデータ構造とすること（初期リリースでは不要）。
- **UX**: シンプルな操作性を重視し、複雑なパラメータ（Temperature等）はGUIに出さない。

## 5. 検証シナリオ
(v2.0 と同様の Case-A, B, C を使用)
